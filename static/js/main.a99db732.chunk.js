(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{36:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n.n(a),s=n(19),i=n.n(s),l=n(11),o=n(2),j=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("h1",{className:"font-weigth-light display-1 text-center",children:"Restaurant Finder"})})},u=n(3),b=n.n(u),d=n(6),h=n(5),x="https://safe-basin-83132.herokuapp.com/api/v1/restaurants/",O=n(21),p=Object(a.createContext)(),m=function(e){var t=Object(a.useState)([]),n=Object(h.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(null),l=Object(h.a)(i,2),o=l[0],j=l[1];return Object(c.jsx)(p.Provider,{value:{restaurants:r,setRestaurants:s,selectedRestaurant:o,setSelectedRestaurant:j,addRestaurant:function(e){s([].concat(Object(O.a)(r),[e]))},deleteRestaurant:function(e){s(r.filter((function(t){return t.id!==e})))}},children:e.children})},f=function(){var e=Object(a.useContext)(p).addRestaurant,t=Object(a.useState)(""),n=Object(h.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(""),l=Object(h.a)(i,2),o=l[0],j=l[1],u=Object(a.useState)(""),O=Object(h.a)(u,2),m=O[0],f=O[1],v=function(){var t=Object(d.a)(b.a.mark((function t(n){var c,a,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c={name:r,location:o,price_range:m},t.prev=2,t.next=5,fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 5:return a=t.sent,t.next=8,a.json();case 8:i=t.sent,e(i.data.restaurant),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0);case 15:s(""),j(""),f("");case 18:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsx)("div",{className:"mb-4",children:Object(c.jsx)("form",{action:"",onSubmit:v,children:Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsx)("div",{className:"col",children:Object(c.jsx)("input",{value:r,onChange:function(e){return s(e.target.value)},type:"text",className:"form-control",placeholder:"Name"})}),Object(c.jsx)("div",{className:"col",children:Object(c.jsx)("input",{value:o,onChange:function(e){return j(e.target.value)},type:"text",className:"form-control",placeholder:"Location"})}),Object(c.jsx)("div",{className:"col",children:Object(c.jsxs)("select",{value:m,onChange:function(e){return f(e.target.value)},className:"custom-select mr-sm-2",children:[Object(c.jsx)("option",{disabled:!0,children:"Price Range"}),Object(c.jsx)("option",{value:"1",children:"$"}),Object(c.jsx)("option",{value:"2",children:"$$"}),Object(c.jsx)("option",{value:"3",children:"$$$"}),Object(c.jsx)("option",{value:"4",children:"$$$$"}),Object(c.jsx)("option",{value:"5",children:"$$$$$"})]})}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add"})]})})})},v=function(e){var t=e.rating;t=Number(t);for(var n=[],a=1;a<=5;a++)a<=t?n.push(Object(c.jsx)("i",{className:"fas fa-star text-warning"},a)):a>t&&a<t+1?n.push(Object(c.jsx)("i",{className:"fas fa-star-half-alt text-warning"},a)):n.push(Object(c.jsx)("i",{className:"far fa-star text-warning"},a));return Object(c.jsx)("div",{className:"d-inline-block",children:n})},g=function(e){var t=e.restaurant,n=Object(a.useContext)(p).deleteRestaurant,r=Object(o.f)(),s=function(){var e=Object(d.a)(b.a.mark((function e(t,c){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation();try{fetch(x+c,{method:"DELETE"}),n(c)}catch(a){console.log(a)}case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=t.id,l=t.name,j=t.location,u=t.price_range;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("tr",{onClick:function(){return function(e){r.push("/restaurants/".concat(e))}(i)},children:[Object(c.jsx)("td",{children:l}),Object(c.jsx)("td",{children:j}),Object(c.jsx)("td",{children:"$".repeat(u)}),Object(c.jsx)("td",{children:function(e){var t=e.count,n=e.avg_rating;return t?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(v,{rating:n}),Object(c.jsxs)("span",{className:"text-warning ml-1",children:["(",t,")"]})]}):Object(c.jsx)("span",{className:"text-warning ml-1",children:"No reviews"})}(t)}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(e){return function(e,t){e.stopPropagation(),r.push("/restaurants/".concat(t,"/update"))}(e,i)},className:"btn btn-warning",children:"Update"})}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(e){return s(e,i)},className:"btn btn-danger",children:"Delete"})})]},i)})},N=function(){var e=Object(a.useContext)(p),t=e.restaurants,n=e.setRestaurants,r=function(){var e=Object(d.a)(b.a.mark((function e(){var t,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(x);case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,n(c.data.restaurants),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){r()}),[]);return Object(c.jsx)("div",{className:"list-group",children:Object(c.jsxs)("table",{className:"table table-hover table-dark",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{className:"bg-primary",children:[Object(c.jsx)("th",{scope:"col",children:"Restaurant"}),Object(c.jsx)("th",{scope:"col",children:"Location"}),Object(c.jsx)("th",{scope:"col",children:"Price Range"}),Object(c.jsx)("th",{scope:"col",children:"Ratings"}),Object(c.jsx)("th",{scope:"col",children:"Edit"}),Object(c.jsx)("th",{scope:"col",children:"Delete"})]})}),Object(c.jsx)("tbody",{children:function(e){if(e)return e.map((function(e){return Object(c.jsx)(g,{restaurant:e})}))}(t)})]})})},w=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(j,{}),Object(c.jsx)(f,{}),Object(c.jsx)(N,{})]})},y=function(e){var t=e.review,n=t.name,a=t.rating,r=t.content;return Object(c.jsxs)("div",{className:"card text-white bg-primary mb-3 mr-4",style:{maxWidth:"30%"},children:[Object(c.jsxs)("div",{className:"card-header d-flex justify-content-between",children:[Object(c.jsx)("span",{children:n}),Object(c.jsx)(v,{rating:a})]}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsx)("p",{className:"card-text",children:r})})]})},$=function(e){var t=e.reviews;return Object(c.jsx)("div",{className:"form-row row-cols-3 justify-content-between mb-2 mx-0",children:t.map((function(e){return Object(c.jsx)(y,{review:e},e.id)}))})},R=function(e){var t=e.fetchRestaurant,n=Object(o.g)().id,r=Object(a.useState)(""),s=Object(h.a)(r,2),i=s[0],l=s[1],j=Object(a.useState)(""),u=Object(h.a)(j,2),O=u[0],p=u[1],m=Object(a.useState)(""),f=Object(h.a)(m,2),v=f[0],g=f[1],N=function(){var e=Object(d.a)(b.a.mark((function e(c){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),a={name:i,rating:O,content:v},e.prev=2,e.next=5,fetch(x+n+"/addReview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:t(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("form",{onSubmit:N,children:[Object(c.jsxs)("div",{className:"form-row",children:[Object(c.jsxs)("div",{className:"form-group col-8",children:[Object(c.jsx)("label",{htmlFor:"name",children:"Name"}),Object(c.jsx)("input",{value:i,onChange:function(e){return l(e.target.value)},type:"text",id:"name",placeholder:"Name",className:"form-control"})]}),Object(c.jsxs)("div",{className:"form-group col-4",children:[Object(c.jsx)("label",{htmlFor:"rating",children:"Rating"}),Object(c.jsxs)("select",{value:O,onChange:function(e){return p(e.target.value)},id:"rating",className:"custom-select",children:[Object(c.jsx)("option",{disabled:!0,children:"Rating"}),Object(c.jsx)("option",{value:"1",children:"1"}),Object(c.jsx)("option",{value:"2",children:"2"}),Object(c.jsx)("option",{value:"3",children:"3"}),Object(c.jsx)("option",{value:"4",children:"4"}),Object(c.jsx)("option",{value:"5",children:"5"})]})]})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"content",children:"Review"}),Object(c.jsx)("textarea",{value:v,onChange:function(e){return g(e.target.value)},id:"content",className:"form-control",placeholder:"Leave a review...",rows:"5"})]}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add Review"})]})},S=function(){var e=Object(o.g)().id,t=Object(a.useContext)(p),n=t.selectedRestaurant,r=t.setSelectedRestaurant,s=Object(a.useState)(!1),i=Object(h.a)(s,2),l=i[0],j=i[1],u=function(){var e=Object(d.a)(b.a.mark((function e(t){var n,c,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(x+t);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,a=c.data,r(a.restaurant),j(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){u(e)}),[]),Object(c.jsxs)("div",{className:"mt-3",children:[l?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{className:"text-center display-1",children:n.name}),Object(c.jsxs)("div",{className:"text-center",children:[Object(c.jsx)(v,{rating:n.avg_rating}),Object(c.jsxs)("span",{className:"text-warning ml-1",children:["(",Number(n.count),")"]})]}),Object(c.jsx)("div",{className:"mt-3",children:Object(c.jsx)($,{reviews:n.reviews})})]}):"",Object(c.jsx)(R,{fetchRestaurant:u})]})},k=function(){var e=Object(o.f)(),t=Object(o.g)().id,n=Object(a.useState)(""),r=Object(h.a)(n,2),s=r[0],i=r[1],l=Object(a.useState)(""),j=Object(h.a)(l,2),u=j[0],O=j[1],p=Object(a.useState)(""),m=Object(h.a)(p,2),f=m[0],v=m[1],g=function(){var e=Object(d.a)(b.a.mark((function e(){var n,c,a,r,s,l,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(x+t);case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,a=c.data,r=a.restaurant,s=r.name,l=r.location,o=r.price_range,i(s),O(l),v(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){g()}),[]);var N=function(){var n=Object(d.a)(b.a.mark((function n(c){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),a={name:s,location:u,price_range:f},n.prev=2,n.next=5,fetch(x+t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return n.next=7,e.push("/");case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}();return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:N,children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"name",children:"Name"}),Object(c.jsx)("input",{value:s,onChange:function(e){return i(e.target.value)},type:"text",id:"name",className:"form-control"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"location",children:"Location"}),Object(c.jsx)("input",{value:u,onChange:function(e){return O(e.target.value)},type:"text",id:"location",className:"form-control"})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"price_range",children:"Price Range"}),Object(c.jsxs)("select",{value:f,onChange:function(e){return v(e.target.value)},id:"price_range",className:"form-control custom-select",children:[Object(c.jsx)("option",{disabled:!0,children:"Price Range"}),Object(c.jsx)("option",{value:"1",children:"$"}),Object(c.jsx)("option",{value:"2",children:"$$"}),Object(c.jsx)("option",{value:"3",children:"$$$"}),Object(c.jsx)("option",{value:"4",children:"$$$$"}),Object(c.jsx)("option",{value:"5",children:"$$$$$"})]})]}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})})},C=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{className:"text-center",children:"Update Restaurant"}),Object(c.jsx)(k,{})]})};var F=function(){return Object(c.jsx)(m,{children:Object(c.jsx)("div",{className:"container",children:Object(c.jsx)(l.a,{children:Object(c.jsxs)(o.c,{children:[Object(c.jsx)(o.a,{exact:!0,path:"/",children:Object(c.jsx)(w,{})}),Object(c.jsx)(o.a,{exact:!0,path:"/restaurants/:id",children:Object(c.jsx)(S,{})}),Object(c.jsx)(o.a,{exact:!0,path:"/restaurants/:id/update",children:Object(c.jsx)(C,{})})]})})})})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(F,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.a99db732.chunk.js.map